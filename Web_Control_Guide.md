# RFID 打卡系統 - WiFi AP 控制說明

## 概述

此專案包含一個Arduino RFID系統，現在已升級為支援WiFi AP控制。ESP8266會建立一個WiFi熱點，用戶可以通過任何支援WiFi的設備（手機、平板、電腦）連接到該熱點，並通過網頁瀏覽器控制RFID讀寫操作。

## 硬體需求

- ESP8266開發板 (NodeMCU/ESP-12F)
- MFRC522 RFID模組
- SSD1306 OLED顯示屏 (128x64)
- 按鈕和蜂鳴器

## 軟體需求

### Arduino端
- Arduino IDE
- U8g2函式庫
- ESP8266WiFi函式庫
- ESP8266WebServer函式庫

## 安裝步驟

### 1. 安裝所需函式庫
1. 安裝 U8g2 函式庫
2. 安裝 ESP8266WiFi 函式庫
3. 安裝 ESP8266WebServer 函式庫

### 2. 上傳Arduino程式碼
1. 將修改後的程式碼上傳到ESP8266
2. 確認所有硬體連接正確

## WiFi AP 設定

- **SSID**: RFID-Punch-System
- **密碼**: 123456789
- **IP地址**: 192.168.4.1 (通常是這個，具體以串口輸出為準)

## 使用方法

### 1. 連接WiFi
- 在您的設備上搜索名為 "RFID-Punch-System" 的WiFi網絡
- 使用密碼 "123456789" 連接

### 2. 打開網頁控制面板
- 在瀏覽器中輸入 `http://192.168.4.1`
- 您將看到RFID控制面板

### 3. 控制功能

#### 模式設定
- **設定為讀取模式**: 將系統切換到讀取模式
- **設定為寫入模式**: 將系統切換到寫入模式

#### 讀取卡片
- 點擊"讀取卡片"按鈕
- 將RFID卡片靠近讀取器
- 系統會返回卡片UID和儲存的資料

#### 寫入卡片
- 在"輸入要寫入的資料"框中輸入要寫入的資料（最多16字元）
- 點擊"寫入卡片"按鈕
- 將RFID卡片靠近讀取器完成寫入

#### 狀態查詢
- 點擊"查詢狀態"按鈕查看當前系統狀態

## HTTP API 接口

### 端點列表
- `/` - 主頁面
- `/read` - 讀取卡片資料
- `/write?data=資料` - 寫入資料到卡片
- `/mode?set=read|write` - 切換模式
- `/status` - 查詢系統狀態

### API 回應格式
- 成功回應: `{"success": true, ...}`
- 失敗回應: `{"success": false, "error": "錯誤訊息"}`

## 故障排除

1. **找不到WiFi AP**
   - 確認Arduino程式已正確上傳
   - 檢查串口輸出確認AP是否啟動
   - 確認ESP8266 WiFi功能正常

2. **無法訪問網頁**
   - 確認已連接到正確的WiFi AP
   - 嘗試輸入IP地址 `http://192.168.4.1`
   - 清除瀏覽器快取後重試

3. **讀寫失敗**
   - 確認RFID卡片靠近讀取器
   - 檢查卡片是否支援MIFARE Classic協定
   - 確認卡片未被鎖定

## 自定義設定

您可以修改程式碼中的以下參數：
- `ssid` - WiFi AP名稱
- `password` - WiFi AP密碼

## 注意事項

- RFID模組必須使用3.3V供電，不可接5V
- 寫入操作會覆蓋卡片第4區塊的資料
- 每次讀寫操作後系統會自動返回模式選擇畫面
- 卡片資訊顯示2秒後自動返回主畫面
- 可同時支援按鈕控制和網頁控制